<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Basic Metas -->
	<meta charset="utf-8">
	<title>Hosting With GitHub Pages | Kevin Yap</title>
	<meta name="description" content="Over the past couple of days, I made the switch to using GitHub as the hosting platform for my website by using GitHub Pages. This felt like a natural progression as I already used GitHub for version control for the source of ...">
	<meta name="author" content="Kevin Yap">
	<link rel="author" href="https://plus.google.com/+KevinYapCA"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<!-- Twitter Cards and Open Graph -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:creator" content="@iKevinY">
	<meta name="twitter:domain" content="kevinyap.ca">
	<meta name="twitter:site" content="@iKevinY">
	<meta property="og:title" content="Hosting With GitHub Pages">
	<meta property="og:description" content="Over the past couple of days, I made the switch to using GitHub as the hosting platform for my website by using GitHub Pages. This felt like a natural progression as I already used GitHub for version control for the source of ...">
	<meta property="og:image" content="http://kevinyap.ca/images/icons/avatar.png">
	<meta property="og:type" content="article">
	<meta property="og:url" content="http://kevinyap.ca/2013/12/hosting-with-github-pages/">

	<!-- Stylesheets and Web Fonts -->
	<link href="/theme/style.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,700|Source+Code+Pro" rel="stylesheet" type="text/css">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!-- Favicons -->
	<link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="57x57" href="/images/icons/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/images/icons/apple-touch-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/images/icons/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/images/icons/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/images/icons/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/images/icons/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/images/icons/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/images/icons/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon-180x180.png">

	<link rel="icon" type="image/png" href="/images/icons/favicon-16x16.png" sizes="16x16">
	<link rel="icon" type="image/png" href="/images/icons/favicon-32x32.png" sizes="32x32">
	<link rel="icon" type="image/png" href="/images/icons/favicon-96x96.png" sizes="96x96">
	<link rel="icon" type="image/png" href="/images/icons/favicon-160x160.png" sizes="160x160">
	<link rel="icon" type="image/png" href="/images/icons/favicon-196x196.png" sizes="196x196">

	<meta name="theme-color" content="#FF8000">

	<meta name="msapplication-TileColor" content="#FF8000">
	<meta name="msapplication-TileImage" content="/images/icons/mstile-144x144.png">
	<meta name="msapplication-square70x70logo" content="/images/icons/mstile-small.png">
	<meta name="msapplication-square150x150logo" content="/images/icons/mstile-medium.png">
	<meta name="msapplication-wide310x150logo" content="/images/icons/mstile-wide.png">
	<meta name="msapplication-square310x310logo" content="/images/icons/mstile-large.png">

	<!--[if lt IE 9]>
	<script src="/theme/js/html5shiv.min.js"></script>
	<script src="/theme/js/respond.min.js"></script>
	<![endif]-->
</head>

<body>
	<div class="container">
		<aside>
			<a href="/"><img id="avatar" alt="Site Avatar" src="/images/icons/avatar.png"></a>
			<div id="name"><a href="/">Kevin Yap</a></div>
			<div id="bio">Developer and musician from Vancouver, BC.</div>

			<div id="sidebar-links">
				<a href="/about/">About</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="/archive/">Archive</a>
			</div>

			<div id="social">
				<a href="mailto:me@kevinyap.ca" title="Email (me@kevinyap.ca)" class="icon fa fa-envelope"></a>
				<a href="http://twitter.com/iKevinY" title="Twitter" class="icon fa fa-twitter"></a>
				<a href="http://github.com/iKevinY" title="GitHub" class="icon fa fa-github"></a>
				<a href="http://soundcloud.com/iKevinY" title="SoundCloud" class="icon fa fa-soundcloud"></a>
				<a href="/atom.xml" title="Atom Feed" class="icon fa fa-rss"></a>
			</div>

			<hr id="sidebar-divider">
		</aside>

		<article>
	<h1 class="title"><a href="/2013/12/hosting-with-github-pages/" title="Permalink to Hosting With GitHub Pages">Hosting With GitHub&nbsp;Pages</a></h1>
	<time class="date" datetime="2013-12-07 00:00:00-08:00">December 07, 2013</time>
	<div class="content">
		<p>Over the past couple of days, I made the switch to using GitHub as the hosting platform for my website by using <a href="http://pages.github.com">GitHub Pages</a>. This felt like a natural progression as I already used GitHub for version control for the source of my website. I initially thought the move would be confusing and time-consuming, but after the <span class="caps">DNS</span> changes propagated, everything was up and running just as it had been before the&nbsp;move.</p>
<p>When dealing with User Pages with GitHub Pages, the hosted files must be located in the <code>master</code> branch of the repository. Since I didn&#8217;t want to have separate repositories for the source of the website and for the generated files, I opted to make an orphaned branch named <code>src</code> which would contain the source files. While I thought this would be complicated, it turned out to be quite&nbsp;straightforward.</p>
<p>Within the root directory of my website&#8217;s source, there is an <code>output</code> directory that the static site files generated by <a href="http://getpelican.com">Pelican</a> go. Prior to using GitHub Pages, I had written a Bash script that would run the <code>pelican</code> command to generate the static site files and upload them using <a href="http://en.wikipedia.org/wiki/Rsync">rsync</a>. Obviously, this script had to be rewritten, as in order to use GitHub Pages, changes need to be pushed to a Git repository rather than being uploaded to a web&nbsp;server.</p>
<p>To accomplish this, there are two Git repository: one in the root directory of my website&#8217;s source and one in the output directory. Both remotes are configured to push to the same remote repository stored on GitHub. The local repository in the root directory has the <code>output/</code> directory in its <code>.gitignore</code> file and commits to the <code>src</code> branch while the <code>output/</code> repository commits to the <code>master</code> branch. While they are technically part of the same remote repository, each local repository is completely separate from the&nbsp;other.</p>
<p>I created an <span class="caps">SSH</span> key so that I do not have to manually authenticate every time <code>git push</code> is run by my site generation script. (Also because I have two-factor authentication enabled on my GitHub account.) While this did not work initially, it turns out that I was using the wrong remote <span class="caps">URL</span>; the proper <span class="caps">URL</span> to use over <span class="caps">SSH</span> (which in retrospect is quite obvious) is <code>ssh://git@github.com:user/repo.git</code>, rather than the <span class="caps">HTTPS</span> <span class="caps">URL</span> that is shown by default on the right side of the page when browsing the repository on&nbsp;GitHub.</p>
<p>While I use <a href="http://mac.github.com">GitHub for Mac</a> to manage the repository for the source files (the <code>src</code> branch), the repository for the <code>output/</code> directory is only modified by the site generation script. Making use of <a href="https://help.github.com/articles/github-flavored-markdown">GitHub Flavoured Markdown</a>, the commit messages in the <code>master</code> branch contain links to the most recent commit in the <code>src</code> branch. When viewing the <code>master</code> branch on GitHub, the <a href="http://en.wikipedia.org/wiki/SHA-1"><span class="caps">SHA</span> hashes</a> automagically link to the corresponding commits in the <code>src</code> branch that generated the changes in the static site files, making it easy to determine what changes in the source files led to changes in the generated&nbsp;files.</p>
<p>To achieve this, the script runs the following code after the <code>pelican</code> command generates the static site&nbsp;files.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">cd</span> <span class="nv">$sourceDirectory</span>
<span class="nv">commitHash</span><span class="o">=</span><span class="k">$(</span>git rev-parse HEAD<span class="k">)</span>
<span class="nb">cd</span> <span class="nv">$outputDirectory</span>
git add -A
git checkout master
<span class="nb">read</span> -p <span class="s2">&quot;Extended commit message: &quot;</span> commitMessage
<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$commitMessage</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    git commit -m <span class="s2">&quot;Generated by </span><span class="nv">$commitHash</span><span class="s2">&quot;</span>
<span class="k">else</span>
    git commit -m <span class="s2">&quot;Generated by </span><span class="nv">$commitHash</span><span class="s2">&quot;</span> -m <span class="s2">&quot;</span><span class="nv">$commitMessage</span><span class="s2">&quot;</span>
<span class="k">fi</span>
git push
</pre></div>
</td></tr></table>

<p>The command <code>git rev-parse HEAD</code> returns the hash of the last commit in the Git repository&#8217;s history and is stored in the variable <code>$commitHash</code>. The directory is then changed to <code>output/</code> and <code>git checkout</code> is run to ensure the branch that changes will be committed to is the <code>master</code> branch (not that it should change, but in case I were to accidentally change branches manually, this would prevents anything problematic from happening). Any changes made are then added via <code>git add -A</code>.</p>
<p>Following this, the script prompts for an extended commit message (what gets shown on GitHub after expanding the message). The first line of the commit message is &#8220;Generated by&#8221; followed by the hash of the last commit made in the <code>src</code> branch, and if an extended commit message is provided, the script will add it in. Finally, the commit is pushed to the <code>master</code> branch on&nbsp;GitHub.</p>
<p>All in all, this solution seems to work very well. I would highly recommend using GitHub Pages for static&nbsp;sites.</p>
	</div>

	<div id="related-articles">
		<a href="/2013/12/styling-code-blocks-using-pelican/" id="next-neighbour">&laquo; Styling Code Blocks Using Pelican</a>
		<a href="/2013/07/the-great-white-pelican-migration/" id="prev-neighbour">The Great (White) Pelican Migration &raquo;</a>
	</div>

			<hr>
		</article>

		<footer>
			<p>Powered by <a href="http://getpelican.com">Pelican</a> and <a href="http://pages.github.com">GitHub&nbsp;Pages</a>.</p>
		</footer>
	</div>


</body>
</html>